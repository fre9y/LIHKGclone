-- Users -> stations -> images -> posts -> replies -> favourite


CREATE TABLE replies (
    id SERIAL primary key,
    created_at timestamp not null default now(),
    updated_at timestamp not null default now(),
    page_number INTEGER not null default 1,
    likes INTEGER not null default 0,
    dislikes INTEGER not null default 0,
    user_id INTEGER not null,
    FOREIGN KEY (user_id) REFERENCES users(id),
    post_id INTEGER not null,
    FOREIGN KEY (post_id) REFERENCES posts(id),
    content TEXT,
    reference_id INTEGER,
    show Boolean not null default true
);

insert into replies
(user_id, post_id, content, reference_id, likes, dislikes)
values
(1, 1, 'éŸ‹ç¦®å®‰ä¸€å€‹æœˆéƒ½ä¿‚100è¬view
é™³ä¼¯çœŸä¿‚æ‚', null, 0, 1),
(2, 1, 'å”±åˆ°å’æ¨£åŒè¿ç¦®å®‰æ¯”è¼ƒï¼Œ
å…¶å¯¦ç®—ç»é†œå®šçˆ­å…‰#', null, 1, 3),
(3, 1, 'å””ä¸€å®šè¦é«˜éŸ³å…ˆå«å”±å¾—å¥½æ—¢', null, 3, 1),
(2, 1, 'å…¶å¯¦åªä¿‚æˆ‘åœ°è‡ªå·±å‹ä¿‚åº¦ç˜‹ç‹‚æ´—view', null, 7, 2),
(4, 1, 'é¦™æ¸¯äººçœŸä¿‚å“‚é³©æ°£
æœ‰view å°±è‡ªå·±äººåˆ·view ç„¡é¬¼ä½¬å¤–åœ‹äººç‡
å°viewå°±æ¥ç¬‘
æ°¸é å””å¯ä»¥æ­£é¢é¢å°ä¸€ä»¶äº‹
è·Ÿæœ¬å””å€¼å¾—æ“æœ‰å¥½æ—¢äººåŒäº‹', null, 5, 7),
(5, 2, 'èƒ¡é´»å‡ğŸ‘ğŸ»

ä¸€å®šå­é †', null, 13, 1),
(3, 2, 'èƒ¡éŒ¦æ¿¤', null, 9, 1),
(1, 2, 'èƒ¡å®¶å¯¶è—', null, 2, 11),
(2, 2, 'åŠ›å¨', null, 1, 23),
(4, 2, 'å””ç·´ä¸‹èº«', 4, 0, 1),
(1, 3, 'èƒŒæ™¯ï¼šè‡ªä½ï¼Œä¸€å€‹ç£ä»”ç•ªå·¥ï¼Œä¸€å€‹è§€å¡˜ç•ªå·¥ï¼Œå†‡å°æœ‹å‹
ç­†ç›´å¤§ç´„450è¬
ä¹‹å‰å†‡ä½éæ²™ç”°å€
ç‡ä¸­ç¬¬ä¸€åŸäº¤é€šï¼Œæœ‰å•†é‹ªé£Ÿè‚†ï¼Œéœä¸­å¸¶æ—º

å¿ƒå„€284/304å‘å–®ä½

Concernä½ä¿‚å¤§å»ˆç¶­ä¿®è²»/æ¼æ°´å•é¡Œ

å’å¤šä½æœ‰ç„¡æ„è¦‹/è²¼å£«ç•€ç•€å°å¼Ÿ
æ‡‰è©²è²·é‚Šå€‹åº§å‘/æœ‰å†‡è£ä¿®/é»æ¨£æŸ¥å…‡å®…/è»Šä½æ˜¯å¦è¶³å¤ ', null, 6, 12),
(2, 3, 'å¤–è³£å””é€è‡ªæ±‚å¤šç¦', null, 0, 1),
(4, 3, 'éƒ½40å¹´æ¨“, çœŸä¿‚å¥½å’©', null, 3, 2),
(3, 3, 'èˆ‡å…¶è²·ç¬¬ä¸€åŸå’èˆŠå˜…æ¨“ä¸å¦‚ä¿¾è²´å°‘å°‘è²·å•²åŒå€æ–°å•²å˜…æ¨“ï¼ŒèˆŠæ¨“é²æ—©ç„¡äººè²·åªæœƒä¸€è·¯çœ¨å€¼', null, 0, 0),
(1, 3, 'ä½ å°±å””é€', 2, 0, 0),
(4, 4, 'é¦™æ¸¯èˆ‡å…§åœ°æœˆåˆèµ·æ¢å¾©é€šé—œï¼Œé«˜éµé¦™æ¸¯æ®µå‰æ—¥ï¼ˆ15æ—¥ï¼‰äº¦å¾©é‹ï¼Œç¤¾æœƒæœŸå¾…é¦™æ¸¯å¯é€²ä¸€æ­¥é‚å‘å¾©å¸¸ä¹‹è·¯ã€‚è¡Œæ”¿é•·å®˜æå®¶è¶…ä»Šæ—¥ï¼ˆ17æ—¥ï¼‰æ¥å—å ±ç« å°ˆè¨ªæ™‚è¡¨ç¤ºï¼Œé€šé—œç¬¬ä¸€éšæ®µçš„é–‹æ”¾å®‰å…¨ã€æœ‰åºã€æš¢é †ï¼Œç¬¦åˆé æœŸï¼Œè‡ªè¨€å¾ˆå¿ƒæ€¥çš„ä»–å¸Œæœ›å¯ä»¥ç›¡æ—©é–‹å•Ÿç¬¬äºŒéšæ®µï¼šã€Œä¸€å®šä¸æœƒè®“å¸‚æ°‘å¤±æœ›ï¼Œè€Œä¸”èƒ½çµ¦å¤šä¸€é»é»é©šå–œã€‚ã€é€šé—œä¹‹å¾Œï¼Œæå®¶è¶…è¡¨ç¤ºå¸Œæœ›ä»Šå¹´å…§å–æ¶ˆæ‰€æœ‰é˜²ç–«é™åˆ¶ï¼ŒåŒ…æ‹¬å£ç½©ä»¤ï¼Œæšè¨€å¸Œæœ›ä»Šå¹´ç¬¬ä¸€å­£è§£æ±ºæ‰€æœ‰å•é¡Œï¼Œä½†é‡ç”³ä½œæ±ºç­–è¦å‹™å¯¦ï¼Œè¦çœ‹æœ‰æ²’æœ‰é¢¨éšªï¼Œä¸å¯åªæ˜¯ç›²è¡ã€‚

åŸæ–‡ç¶²å€: æå®¶è¶…å†€ä»Šå¹´å…§å–æ¶ˆå£ç½©ä»¤ã€€ç¨±é€šé—œå°‡æœ‰é©šå–œï¼šç¬¬ä¸€å­£è§£æ±ºæ‰€æœ‰å•é¡Œ


è’™é¢æ³•æ­£å¼å¯¦æ–½', null, 8, 24),
(3, 4, 'éƒ½æœƒç¹¼çºŒæˆ´', null, 0, 1),
(2, 4, 'é™¤ç½©æ’šæ­¡å‘¼é³¥', null, 4, 3),
(1, 4, 'ç„¡å£ç½©ä»¤å¸¶å£ç½©ä¿‚å’ªå‘Šæš´å‹•ğŸ¤£ğŸ¤£ğŸ¤£', null, 0, 0),
(1, 5, 'ç²¾ç°¡ç‰ˆï¼š æœ‰äººçˆ†å’—æ®˜å»å’–å•¡ ç„¡å¾è‰¯é
æƒ³é£ŸèŠ±ç”Ÿ follow IG: seanlam_888

å’–å•¡æœ¬èº«å¥½æ¿€å‹•æƒ³èª¹è¬—ä¿¡
ä¾åŠ åˆè¦ºå¾—è¡å‹•å’—

Sean è©±å¤ 100k æœ‰è­‰æ“š ï¼ˆè‡ªæ‹ç›¸ï¼‰çˆ†
ä¸éè¦ºå¾—éº»ç…© å””ä¿¡å˜…
ç„¡äººè¿«ä½ å“‹follow', null, 1, 1),
(1, 5, 'lm', null, 5, 5),
(3, 5, 'lm', null, 6, 1),
(4, 5, 'å»ºè­°æ–°å˜…é‡‘å‰›æ£’updateè¿”æ¬ å‚µalexæŸ’äº‹', null, 3, 4);

insert into replies
(user_id, post_id, content, reference_id, likes, dislikes)
values (3, 6, 'åšä½ è¦ªå‹æˆ–è¨± å®¹æ˜“åœ˜èšä¸‹åˆå†å‚¾èˆŠæ™‚
                            äºŒä¼¯è½èªªæœ‰å–œ åˆä¸€çš„é¤å®´
                            æ­å–œ æˆ‘å†è³€ä½ æ–°å¹´
                            åšä½ è¦ªå‹æˆ–è¨± å®¹æ˜“
                            åœ˜èšä¸‹åˆå†å‚¾ èˆŠæ™‚
                            äºŒä¼¯è½èªªæœ‰å–œ åˆä¸€çš„é¤å®´
                            æ­å–œ æˆ‘å†è³€ä½ æ–°å¹´', null, 3, 4);

insert into replies
(user_id, post_id, content, reference_id, likes, dislikes)
values (7, 2, 'èƒ¡å³¯', null, 0, 3),
        (8, 2, 'èƒ¡é¦™', null, 5, 11),
        (9, 2, 'èƒ¡èªªæ¨“å¸‚', null, 2, 0),
        (10, 2, 'èƒ¡ï¼Œå–®å­—ä¸€å€‹ã€Œé›ªã€ï¼ŒåŠ åŸ‹å°±ä¿‚ã€Œèƒ¡é›ªã€', null, 5, 43),
        (11, 2, 'èƒ¡ç‘°éº—', null, 0, 0),
        (9, 2, 'èƒ¡ç†å°å§', null, 4, 0),
        (1, 2, 'èƒ¡æœè±¬å', null, 21, 11),
        (2, 2, 'èƒ¡ä¸€åˆ€', null, 0, 0),
        (3, 2, 'èƒ¡è¾£ä¸‰å°', null, 52, 11),
        (4, 2, 'èƒ¡æ¡ƒ', null, 2, 0),
        (5, 2, 'èƒ¡å¥•å‡¡', null, 8, 19),
        (6, 2, 'skr wu', null, 20, 0),
        (7, 2, 'èƒ¡æå…’', null, 2, 1),
        (8, 2, 'èƒ¡é›ªæ¨¹', null, 0, 0),
        (9, 2, 'èƒ¡é¬§', null, 5, 9),
        (10, 2, 'èƒ¡å›§å›§', null, 2, 11),
        (7, 2, 'èƒ¡è˜¿è””ç´ ', null, 0, 3),
        (8, 2, 'å¥³ä»”å°±ç•¶ç„¶è¦ä½¢ç†æ€§ åŒ ç²¾æ˜ èƒ¡ç†ç²¾', null, 5, 11),
        (9, 2, 'èƒ¡å’åœ–orè€æ¯', null, 2, 0),
        (10, 2, 'èƒ¡å‘¢å–®åˆ€', null, 5, 43),
        (11, 2, 'å®šæ¬£ï¼Œå¯¦è¥¿å£è¥¿é¢', null, 0, 0),
        (9, 2, 'èƒ¡ç†å°å§', null, 4, 0),
        (1, 2, 'å°±å‡ºä¸–å…ˆä¸Šé»å•', null, 21, 11),
        (2, 2, 'èˆ’å¯¶', null, 0, 0),
        (3, 2, 'èƒ¡ä½œé', null, 52, 11),
        (4, 2, 'èƒ¡ç‹¸å…ˆç”Ÿå¹¾å¤šé»', null, 2, 0),
        (5, 2, 'èƒ¡åä¸‰å¹º', null, 8, 19),
        (6, 2, 'èƒ¡å¦®æ™¶', null, 20, 0)


SELECT * FROM replies where post_id = 2;
SELECT * FROM replies JOIN users ON replies.user_id = users.id JOIN posts ON replies.post_id = posts.id WHERE replies.post_id = 2;
SELECT * FROM replies JOIN users ON replies.user_id = users.id JOIN posts ON replies.post_id = posts.id;




select (
    select  json_agg(name) as images_id  from images  where replies_id = replies.id),      
    (select is_male
     from users 
     where users.id = replies.user_id) as is_male,
    users.nickname,
    replies.* from replies
inner JOIN users on users.id = replies.user_id
            where post_id = 2
			and show = true
            order by replies.id ASC
            LIMIT 25 OFFSET 25 * (1 -1);

insert into replies
(user_id, post_id, content, reference_id, likes, dislikes)
values (7, 2, 'èƒ¡è˜¿è””ç´ ', null, 0, 3),
        (8, 2, 'å¥³ä»”å°±ç•¶ç„¶è¦ä½¢ç†æ€§ åŒ ç²¾æ˜ èƒ¡ç†ç²¾', null, 5, 11),
        (9, 2, 'èƒ¡å’åœ–orè€æ¯', null, 2, 0),
        (10, 2, 'èƒ¡å‘¢å–®åˆ€', null, 5, 43),
        (11, 2, 'å®šæ¬£ï¼Œå¯¦è¥¿å£è¥¿é¢', null, 0, 0),
        (9, 2, 'èƒ¡ç†å°å§', null, 4, 0),
        (1, 2, 'å°±å‡ºä¸–å…ˆä¸Šé»å•', null, 21, 11),
        (2, 2, 'èˆ’å¯¶', null, 0, 0),
        (3, 2, 'èƒ¡ä½œé', null, 52, 11),
        (4, 2, 'èƒ¡ç‹¸å…ˆç”Ÿå¹¾å¤šé»', null, 2, 0),
        (5, 2, 'èƒ¡åä¸‰å¹º', null, 8, 19),
        (6, 2, 'èƒ¡å¦®æ™¶', null, 20, 0)

UPDATE replies SET likes = likes + 1 WHERE replies.id = 1;
UPDATE replies set dislikes = 5 where replies.id = 29;
SELECT * FROM replies where replies.post_id = 2;

